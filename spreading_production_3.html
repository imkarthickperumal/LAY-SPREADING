<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lay Spreading</title>
    <!-- Orbitron Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: "Orbitron", sans-serif;
      }
      tr.dragging {
        opacity: 0.5;
        background: #fef3c7;
      }
    </style>
  </head>
  <body
    class="min-h-screen bg-[url('./assets/home.png')] bg-no-repeat bg-center bg-fixed bg-[length:100%] text-black"
  >
    <!-- Header -->
    <header
      class="flex justify-between items-center text-lg sm:text-2xl md:text-4xl font-extrabold tracking-widest border-b-2 border-black py-4 sm:py-5 px-6"
    >
      <div id="liveClock" class="text-base sm:text-lg md:text-xl font-medium">
        00:00
      </div>

      <div class="text-center flex-1">LAY SPREADING</div>
      <div></div>
    </header>

    <!-- Date Section -->
    <section
      class="flex flex-col sm:flex-row justify-between px-4 sm:px-6 py-2 text-xs sm:text-sm md:text-base font-semibold gap-2"
    >
      <div id="date"></div>
      <div>LAY PLAN - TABLE 1</div>
    </section>

    <!-- Content -->
    <main class="px-6 py-4">
      <div
        class="flex flex-col md:flex-row md:items-start justify-between gap-6"
      >
        <!-- Left Tables (smaller width) -->
        <div class="flex flex-col md:flex-row gap-4 flex-1">
          <!-- First Table -->
          <table class="table-auto w-1/3 p-4 rounded text-left">
            <tbody>
              <tr>
                <td class="font-semibold px-2 py-1">JOB NO</td>
                <td class="px-2 py-1">J6955A</td>
              </tr>
              <tr>
                <td class="font-semibold px-2 py-1">MARKER NO</td>
                <td class="px-2 py-1">4980</td>
              </tr>
              <tr>
                <td class="font-semibold px-2 py-1">FAB COLOR</td>
                <td class="px-2 py-1">Sky Blue</td>
              </tr>
              <tr>
                <td class="font-semibold px-2 py-1">LOT</td>
                <td class="px-2 py-1">1</td>
              </tr>
              <tr>
                <td class="font-semibold px-2 py-1">CLR COMBO</td>
                <td class="px-2 py-1">80 / Grey</td>
              </tr>
            </tbody>
          </table>

          <!-- Second Table -->
          <table class="table-auto w-1/3 p-4 rounded text-left">
            <tbody>
              <tr>
                <td class="font-semibold px-2 py-1">PLAN NO</td>
                <td class="px-2 py-1">3260</td>
              </tr>
              <tr>
                <td class="font-semibold px-2 py-1">ORDER</td>
                <td class="px-2 py-1">100%</td>
              </tr>
              <tr>
                <td class="font-semibold px-2 py-1">TABLE DIA</td>
                <td class="px-2 py-1">59.00</td>
              </tr>
              <tr>
                <td class="font-semibold px-2 py-1">CUTTABLE DIA</td>
                <td class="px-2 py-1">56.00</td>
              </tr>
              <tr>
                <td class="font-semibold px-2 py-1">PROGRAM DIA</td>
                <td class="px-2 py-1">60</td>
              </tr>
            </tbody>
          </table>

          <!-- Third Table -->
          <table class="table-auto w-1/3 p-4 rounded text-left">
            <tbody>
              <tr>
                <td class="font-semibold px-2 py-1">LAY LENGTH MTR</td>
                <td class="px-2 py-1">7.47</td>
              </tr>
              <tr>
                <td class="font-semibold px-2 py-1">PROGRAM WGT</td>
                <td class="px-2 py-1">1.916</td>
              </tr>
              <tr>
                <td class="font-semibold px-2 py-1">AVG WGT</td>
                <td class="px-2 py-1">0.192</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Checklist with gray border and rounded corners -->
        <div
          class="border border-gray-400 rounded-md bg-white/80 px-6 py-4 shadow w-full md:w-96 flex flex-col justify-between"
        >
          <h3 class="text-center font-bold mb-3 text-sm sm:text-base">
            CHECK LIST
          </h3>

          <div class="flex items-center justify-between gap-6 mb-4">
            <!-- Brown Sheet -->
            <div class="flex flex-col items-center">
              <label
                class="flex items-center gap-2 text-xs sm:text-sm font-semibold"
              >
                <input type="checkbox" class="w-4 h-4" id="brownCheck" /> Brown
                Sheet
              </label>
              <span id="brownTimer" class="text-gray-600 text-sm font-bold mt-1"
                >00:00</span
              >
            </div>
            <!-- Join Marker -->
            <div class="flex flex-col items-center">
              <label
                class="flex items-center gap-2 text-xs sm:text-sm font-semibold"
              >
                <input type="checkbox" class="w-4 h-4" id="markerCheck" /> Join
                Marker
              </label>
              <span
                id="markerTimer"
                class="text-gray-600 text-sm font-bold mt-1"
                >00:00</span
              >
            </div>
          </div>
        </div>
      </div>

      <!-- Next Button aligned right under checklist -->
      <div class="flex justify-end gap-x-2 mt-4">
        <button
          id="rollStatusBtn"
          class="bg-[#429CBE] hover:bg-[#429CBE] text-white font-semibold px-6 py-2 rounded-md shadow cursor-not-allowed"
        >
          Roll Status
        </button>
        <button
          class="bg-[#8AA7B2] hover:bg-[#8AA7B2] text-white font-semibold px-6 py-2 rounded-md shadow"
        >
          Next
        </button>
      </div>
    </main>

    <div
      class="flex justify-end items-center mt-6 border-t border-gray-400 pt-4"
    ></div>

    <!-- Roll Status Modal -->
    <div
      id="rollModal"
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50"
    >
      <div class="bg-white rounded-md shadow-lg w-96 p-4 relative">
        <h2 class="text-lg font-bold mb-4 text-center">Roll Status</h2>
        <table id="rollTable" class="w-full text-left border border-gray-300">
          <thead>
            <tr class="bg-gray-200">
              <th class="px-2 py-1 border">ROLL NO</th>
              <th class="px-2 py-1 border">PLAN PLY</th>
              <th class="px-2 py-1 border">SCAN</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="px-2 py-1 border">V13203</td>
              <td class="px-2 py-1 border">10</td>
              <td class="px-2 py-1 border">
                <img
                  src="assets/qrcode.png"
                  alt="Scan"
                  class="h-10 w-10 object-cover rounded"
                />
              </td>
            </tr>
            <tr>
              <td class="px-2 py-1 border">V13184</td>
              <td class="px-2 py-1 border">11</td>
              <td class="px-2 py-1 border">
                <img
                  src="assets/qrcode.png"
                  alt="Scan"
                  class="h-10 w-10 object-cover rounded"
                />
              </td>
            </tr>
            <tr>
              <td class="px-2 py-1 border">V13218</td>
              <td class="px-2 py-1 border">11</td>
              <td class="px-2 py-1 border">
                <img
                  src="assets/qrcode.png"
                  alt="Scan"
                  class="h-10 w-10 object-cover rounded"
                />
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Cancel Button -->
        <button
          id="closeModal"
          class="absolute top-2 right-2 bg-red-600 text-white font-bold text-xl rounded-full w-10 h-10 flex items-center justify-center hover:bg-red-700"
        >
          âœ•
        </button>
      </div>
    </div>

    <!-- <script>
      const brownCheck = document.getElementById("brownCheck");
      const markerCheck = document.getElementById("markerCheck");
      const brownTimer = document.getElementById("brownTimer");
      const markerTimer = document.getElementById("markerTimer");
      const liveClock = document.getElementById("liveClock");

      const rollModal = document.getElementById("rollModal");
      const rollStatusBtn = document.getElementById("rollStatusBtn");
      const closeModal = document.getElementById("closeModal");

      let timerStart = null;
      let timerInterval = null;
      let joinMarkerElapsed = 0;

      function formatTime(ms) {
        const totalSeconds = Math.floor(ms / 1000);
        const minutes = String(Math.floor(totalSeconds / 60)).padStart(2, "0");
        const seconds = String(totalSeconds % 60).padStart(2, "0");
        return `${minutes}:${seconds}`;
      }

      function startTimer() {
        timerStart = Date.now();
        liveClock.textContent = "00:00";
        timerInterval = setInterval(() => {
          liveClock.textContent = formatTime(Date.now() - timerStart);
        }, 1000);
      }

      function stopTimer() {
        clearInterval(timerInterval);
        const elapsed = Date.now() - timerStart;
        liveClock.textContent = "00:00";
        return elapsed;
      }

      // Brown Sheet checkbox
      brownCheck.addEventListener("change", () => {
        if (brownCheck.checked) {
          startTimer();
          if (markerCheck.checked) {
            markerCheck.checked = false;
            markerTimer.textContent = "00:00";
          }
        } else {
          clearInterval(timerInterval);
          liveClock.textContent = "00:00";
        }
      });

      // Join Marker checkbox
      markerCheck.addEventListener("change", () => {
        if (markerCheck.checked) {
          if (!brownCheck.checked) brownCheck.checked = true;
          const elapsed = stopTimer();
          brownTimer.textContent = formatTime(elapsed);
          startTimer();
        } else {
          joinMarkerElapsed = stopTimer();
          markerTimer.textContent = formatTime(joinMarkerElapsed);
        }
      });

      // Roll Status button opens modal
      rollStatusBtn.addEventListener("click", () => {
        rollModal.classList.remove("hidden");
      });

      // Close modal
      closeModal.addEventListener("click", () => {
        rollModal.classList.add("hidden");
      });

      // Optional: close modal if clicked outside
      rollModal.addEventListener("click", (e) => {
        if (e.target === rollModal) {
          rollModal.classList.add("hidden");
        }
      });
    </script> -->

    <script>
      const brownCheck = document.getElementById("brownCheck");
      const markerCheck = document.getElementById("markerCheck");
      const brownTimer = document.getElementById("brownTimer");
      const markerTimer = document.getElementById("markerTimer");
      const liveClock = document.getElementById("liveClock");

      const rollModal = document.getElementById("rollModal");
      const rollStatusBtn = document.getElementById("rollStatusBtn");
      const closeModal = document.getElementById("closeModal");

      let timerStart = null;
      let timerInterval = null;
      let activeTimer = null; // "brown" or "marker"

      function formatTime(ms) {
        const totalSeconds = Math.floor(ms / 1000);
        const minutes = String(Math.floor(totalSeconds / 60)).padStart(2, "0");
        const seconds = String(totalSeconds % 60).padStart(2, "0");
        return `${minutes}:${seconds}`;
      }

      function startTimer(type) {
        activeTimer = type;
        timerStart = Date.now();
        liveClock.textContent = "00:00";
        timerInterval = setInterval(() => {
          liveClock.textContent = formatTime(Date.now() - timerStart);
        }, 1000);
      }

      function stopTimer() {
        clearInterval(timerInterval);
        const elapsed = Date.now() - timerStart;
        return elapsed;
      }

      // Brown Sheet click
      brownCheck.addEventListener("change", () => {
        if (brownCheck.checked) {
          startTimer("brown");
        } else {
          clearInterval(timerInterval);
          liveClock.textContent = "00:00";
        }
      });

      // Join Marker click
      markerCheck.addEventListener("change", () => {
        if (markerCheck.checked) {
          // stop brown sheet timing
          if (activeTimer === "brown") {
            const elapsed = stopTimer();
            brownTimer.textContent = formatTime(elapsed);
          }

          // start marker timing
          startTimer("marker");

          // enable Roll Status button
          rollStatusBtn.disabled = false;
          rollStatusBtn.classList.remove("bg-gray-400", "cursor-not-allowed");
          rollStatusBtn.classList.add("bg-[#429CBE]", "hover:bg-[#429CBE]");
        }
      });

      // Roll Status button
      rollStatusBtn.addEventListener("click", () => {
        if (activeTimer === "marker") {
          const elapsed = stopTimer();
          markerTimer.textContent = formatTime(elapsed);
          liveClock.textContent = "00:00";
          activeTimer = null;
        }

        // keep join marker checked permanently
        markerCheck.checked = true;

        // show modal
        rollModal.classList.remove("hidden");
      });

      // Close modal
      closeModal.addEventListener("click", () => {
        rollModal.classList.add("hidden");
      });

      // Close modal if click outside
      rollModal.addEventListener("click", (e) => {
        if (e.target === rollModal) {
          rollModal.classList.add("hidden");
        }
      });
    </script>
  </body>
</html>
